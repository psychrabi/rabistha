import{r as o,j as e}from"./index-ByjZcm9m.js";import{u as N}from"./adminStore-Q-YehAl8.js";import{a as y,o as f,n as S,s as r}from"./types-gMSwJcU1.js";import{u as v}from"./index.esm-CBWu90GV.js";const P="http://localhost:4000/api";class w{async request(t,x={}){const{token:n}=N.getState(),d={headers:{"Content-Type":"application/json",...n&&{Authorization:`Bearer ${n}`}},...x},a=await fetch(`${P}${t}`,d);if(!a.ok){const c=await a.json().catch(()=>({error:"Network error"}));throw new Error(c.error||"Something went wrong")}return a.json()}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async register(t){return this.request("/auth/register",{method:"POST",body:JSON.stringify(t)})}async getLicenses(){return this.request("/licenses")}async createLicense(t){return this.request("/licenses",{method:"POST",body:JSON.stringify(t)})}async getOrders(){return this.request("/orders")}async getWikiPages(){return this.request("/wiki")}async getWikiPage(t){return this.request(`/wiki/${t}`)}async getFAQs(){return this.request("/faqs")}async getSettings(){return this.request("/settings")}async getDashboardStats(){return this.request("/dashboard/stats")}}const h=new w,k=f({siteName:r().min(1,"Site name is required"),siteDescription:r().min(1,"Site description is required"),contactEmail:r().email("Valid email is required"),contactPhone:r().min(1,"Phone number is required"),contactAddress:r().min(1,"Address is required"),smtpHost:r().min(1,"SMTP host is required"),smtpPort:r().min(1,"SMTP port is required"),smtpUser:r().email("Valid SMTP user email is required"),smtpPass:r().min(1,"SMTP password is required"),currency:r().min(1,"Currency is required"),taxRate:S().min(0,"Tax rate must be positive")});function U(){const[,m]=o.useState({}),[t,x]=o.useState(!0),[n,d]=o.useState(!1),[a,c]=o.useState("general"),{register:l,handleSubmit:p,reset:u,formState:{errors:s}}=v({resolver:y(k)});o.useEffect(()=>{b()},[]);const b=async()=>{try{const i=await h.getSettings();m(i),u(i)}catch(i){console.error("Failed to fetch settings:",i)}finally{x(!1)}},j=async i=>{d(!0);try{await h.request("/settings",{method:"PUT",body:JSON.stringify(i)}),m(i),alert("Settings saved successfully!")}catch(g){console.error("Failed to save settings:",g),alert("Failed to save settings. Please try again.")}finally{d(!1)}};return t?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Settings"}),e.jsx("p",{className:"text-gray-600",children:"Configure your ASTER license management system"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"lg:w-64",children:e.jsxs("div",{className:"menu bg-base-200 rounded-box",children:[e.jsx("li",{children:e.jsx("button",{className:a==="general"?"active":"",onClick:()=>c("general"),children:"General Settings"})}),e.jsx("li",{children:e.jsx("button",{className:a==="contact"?"active":"",onClick:()=>c("contact"),children:"Contact Information"})}),e.jsx("li",{children:e.jsx("button",{className:a==="email"?"active":"",onClick:()=>c("email"),children:"Email Configuration"})}),e.jsx("li",{children:e.jsx("button",{className:a==="billing"?"active":"",onClick:()=>c("billing"),children:"Billing Settings"})})]})}),e.jsx("div",{className:"flex-1",children:e.jsx("form",{onSubmit:p(j),children:e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[a==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"General Settings"}),e.jsxs("div",{children:[e.jsx("label",{class:"text-gray-700 dark:text-gray-200",for:"siteName",children:"Site Name"}),e.jsx("input",{placeholder:"ASTER Multiseat",...l("siteName"),type:"text",class:"block w-full px-4 py-2 mt-2 text-gray-700 bg-white border border-gray-200 rounded-md dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 focus:border-blue-400 focus:ring-blue-300 focus:ring-opacity-40 dark:focus:border-blue-300 focus:outline-none focus:ring"}),s.siteName&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.siteName.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Site Description"})}),e.jsx("textarea",{className:`textarea textarea-bordered ${s.siteDescription?"textarea-error":""}`,placeholder:"Transform one computer into multiple workstations",...l("siteDescription")}),s.siteDescription&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.siteDescription.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Logo Upload"})}),e.jsx("input",{type:"file",className:"file-input file-input-bordered",accept:"image/*"}),e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt",children:"Upload your company logo (PNG, JPG)"})})]})]}),a==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Contact Information"}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Contact Email"})}),e.jsx("input",{type:"email",placeholder:"contact@yourcompany.com",className:`input input-bordered ${s.contactEmail?"input-error":""}`,...l("contactEmail")}),s.contactEmail&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.contactEmail.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Phone Number"})}),e.jsx("input",{type:"tel",placeholder:"+1 (555) 123-4567",className:`input input-bordered ${s.contactPhone?"input-error":""}`,...l("contactPhone")}),s.contactPhone&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.contactPhone.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Business Address"})}),e.jsx("textarea",{className:`textarea textarea-bordered ${s.contactAddress?"textarea-error":""}`,placeholder:"123 Business St, City, State 12345",...l("contactAddress")}),s.contactAddress&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.contactAddress.message})})]})]}),a==="email"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Email Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"SMTP Host"})}),e.jsx("input",{type:"text",placeholder:"smtp.gmail.com",className:`input input-bordered ${s.smtpHost?"input-error":""}`,...l("smtpHost")}),s.smtpHost&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.smtpHost.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"SMTP Port"})}),e.jsx("input",{type:"text",placeholder:"587",className:`input input-bordered ${s.smtpPort?"input-error":""}`,...l("smtpPort")}),s.smtpPort&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.smtpPort.message})})]})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"SMTP Username"})}),e.jsx("input",{type:"email",placeholder:"your-email@gmail.com",className:`input input-bordered ${s.smtpUser?"input-error":""}`,...l("smtpUser")}),s.smtpUser&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.smtpUser.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"SMTP Password"})}),e.jsx("input",{type:"password",placeholder:"Your app password",className:`input input-bordered ${s.smtpPass?"input-error":""}`,...l("smtpPass")}),s.smtpPass&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.smtpPass.message})})]}),e.jsxs("div",{className:"alert alert-info",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"For Gmail, use an App Password instead of your regular password."})]})]}),a==="billing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Billing Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Default Currency"})}),e.jsxs("select",{className:`select select-bordered ${s.currency?"select-error":""}`,...l("currency"),children:[e.jsx("option",{value:"",children:"Select currency"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"})]}),s.currency&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.currency.message})})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Tax Rate (%)"})}),e.jsx("input",{type:"number",step:"0.01",placeholder:"0.00",className:`input input-bordered ${s.taxRate?"input-error":""}`,...l("taxRate",{valueAsNumber:!0})}),s.taxRate&&e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text-alt text-error",children:s.taxRate.message})})]})]})]}),e.jsx("div",{className:"card-actions justify-end pt-6",children:e.jsx("button",{type:"submit",className:`btn btn-primary ${n?"loading":""}`,disabled:n,children:n?"Saving...":"Save Settings"})})]})})})})]})]})}export{U as default};
