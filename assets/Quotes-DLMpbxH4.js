const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ViewQuoteModal-Blxg_WPF.js","assets/index-SEtHancR.js","assets/index-imyBcLmj.css","assets/x-B2z8SCLg.js","assets/CreateQuotationModal-B-qcTcmZ.js","assets/types-DjkVMrsM.js","assets/index.esm-BwnxTdgt.js","assets/adminStore-DvjmA4W7.js"])))=>i.map(i=>d[i]);
import{c as D,r as a,a as V,j as t,_ as N}from"./index-SEtHancR.js";import{F}from"./Filter-B0WgaCSl.js";import{P as I}from"./Pagination-0glH4-i4.js";import{u as j}from"./adminStore-DvjmA4W7.js";import{E as O}from"./eye-BDlGd3Z1.js";import{P as R}from"./pencil-CjQE07vf.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],z=D("trash",$),B=a.lazy(()=>N(()=>import("./ViewQuoteModal-Blxg_WPF.js").then(c=>c.V),__vite__mapDeps([0,1,2,3]))),U=a.lazy(()=>N(()=>import("./CreateQuotationModal-B-qcTcmZ.js"),__vite__mapDeps([4,1,2,5,6,7])));function Y(){var g;const{quotes:c,fetchQuotes:h}=j(),[o,w]=a.useState(""),[l,b]=a.useState("all"),[n,k]=a.useState("all"),[p,v]=a.useState(1),[i]=a.useState(8),[d,x]=a.useState(),[S,m]=a.useState(!1),{navigate:C}=V(),E=((g=Array.isArray(c)?c:[])==null?void 0:g.filter(e=>{var u,f;if(o===""&&l==="all"&&n==="all")return!0;const r=o===""||((u=e.user)==null?void 0:u.name.toLowerCase().includes(o.toLowerCase()))||((f=e.user)==null?void 0:f.email.toLowerCase().includes(o.toLowerCase())),L=l==="all"||e.type===l,M=n==="all"||e.status===n;return r&&L&&M}))||[],y=p*i,_=y-i,s=E.slice(_,y),A=e=>{x(e);const r=document.getElementById("quotationModal");r&&r.showModal()},Q=()=>{x(null),m(!0)},T=e=>{x(e),m(!0)},P=async e=>{confirm("Are you sure you want to delete this quotation?")&&(await fetch(`http://localhost:4000/api/admin/quotes/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${j.getState().token}`}})).success&&C(0)};return a.useEffect(()=>{h()},[h]),t.jsxs("section",{className:"w-full p-6 overflow-y-auto  h-full",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Quotes & Invoices"}),t.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Create and manage quotes and invoices"})]}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Q(),children:"Create New Quote"}),S&&t.jsx(U,{quote:d,onClose:()=>m(!1)})]})}),t.jsx(F,{setFilterStatus:k,setSearchTerm:w,setFilterType:b,searchTerm:o,filterType:l,filterStatus:n}),t.jsx("div",{className:"overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg mb-4",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Quote #"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Customer"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Amount"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Status"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Valid Until"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Created"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Actions"})]})}),t.jsx("tbody",{children:(s==null?void 0:s.length)>0?s==null?void 0:s.map((e,r)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[t.jsxs("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:["QT-",e.id]}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:e.user.name}),t.jsxs("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:["$",e.total]}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:t.jsx("div",{className:`badge ${e.status==="DRAFT"?"badge-secondary":e.status==="SENT"?"badge-info":e.status==="ACCEPTED"?"badge-success":"badge-error"}`,children:e.status})}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:new Date(e.validUntil).toLocaleDateString()}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:new Date(e.createdAt).toLocaleDateString()}),t.jsxs("td",{className:"px-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap space-x-2",children:[t.jsx("button",{className:"text-green-600",type:"button",onClick:()=>A(e),children:t.jsx(O,{className:"inline"})}),t.jsx("button",{className:"text-blue-600",type:"button",onClick:()=>T(e),children:t.jsx(R,{className:"inline"})}),t.jsx("button",{className:"text-red-600",type:"button",onClick:()=>P(e),children:t.jsx(z,{className:"inline"})})]})]},r)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:o||l!=="all"||n!=="all"?"No quotes match your filters.":"No quotes available. Add some quotes to get started."})})})]})}),t.jsx(I,{total:s.length,perPage:i,currentPage:p,onPageChange:v}),d&&t.jsx(B,{quote:d})]})}export{Y as default};
