import{c as x,r as c,j as e}from"./index-C1U1H91r.js";import{u as b}from"./adminStore-CYJVUMzR.js";import{F as S}from"./Filter-BQxYm-Ir.js";import{K as L,M as C}from"./MatrixCard-6Cq2yhW7.js";import{E as f}from"./eye-Dbo1sZnS.js";import{B as P}from"./banknote-DwM3Hxs5.js";import{P as M}from"./Pagination-CRFK5J-1.js";import{P as A}from"./plus-Cnmfouc3.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]],E=x("ban",D);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=[["path",{d:"M12 18H4a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5",key:"x6cv4u"}],["path",{d:"M18 12h.01",key:"yjnet6"}],["path",{d:"M19 22v-6",key:"qhmiwi"}],["path",{d:"m22 19-3-3-3 3",key:"rn6bg2"}],["path",{d:"M6 12h.01",key:"c2rlol"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],T=x("banknote-arrow-up",I);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],_=x("shield-alert",F);/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],q=x("shield-x",B);function K(){const[r,s]=c.useState({license:"",type:"",costPrice:"",purchaseDate:""}),{addLicense:a}=b(),[l,g]=c.useState(""),[o,h]=c.useState(""),d=n=>s({...r,[n.target.name]:n.target.value}),m=n=>g(n.target.value),u=async n=>{if(n.preventDefault(),!l.trim()){h("Enter at least one license key.");return}const p=l.split(/[\s,]+/).filter(Boolean).map(i=>({...r,license:i,status:"available"}));a(p).then(i=>{console.log(i),navigate("/admin/licenses")})};return e.jsx("dialog",{className:"modal",id:"addLicenseModal",children:e.jsx("div",{className:"modal-box",children:e.jsxs("form",{onSubmit:u,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"License Key(s) (comma or newline separated)"}),e.jsx("textarea",{name:"multi",value:l,onChange:m,rows:3,className:"block  mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Type"}),e.jsxs("select",{name:"type",value:r.type,onChange:d,className:"select block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",required:!0,children:[e.jsx("option",{value:"",disabled:!0,children:"Select type"}),e.jsx("option",{value:"Pro-2",children:"Pro-2"}),e.jsx("option",{value:"Pro-3",children:"Pro-3"}),e.jsx("option",{value:"Pro-6",children:"Pro-6"}),e.jsx("option",{value:"Annual-2",children:"Annual-2"}),e.jsx("option",{value:"Annual-3",children:"Annual-3"}),e.jsx("option",{value:"Annual-6",children:"Annual-6"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Cost Price"}),e.jsx("input",{name:"costPrice",value:r.costPrice,onChange:d,className:"block  mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Purchase Date"}),e.jsx("input",{type:"date",name:"purchaseDate",value:r.purchaseDate,onChange:d,className:"block  mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"})]})]}),o&&e.jsx("div",{className:"text-red-600",children:o}),e.jsx("button",{className:"bg-blue-600 text-white px-4 py-2 rounded",type:"submit",children:"Add Licenses"})]})})})}const U=({licenses:r})=>{const s=[{title:"Total Licenses",value:r.length,Icon:L,color:"text-blue-600"},{title:"Available",value:r.filter(a=>a.status==="available").length,Icon:f,color:"text-green-600"},{title:"Sold",value:r.filter(a=>a.status==="sold").length,Icon:P,color:"text-blue-600"},{title:"Refunded",value:r.filter(a=>a.status==="refunded").length,Icon:T,color:"text-red-600"},{title:"Deeactivated",value:r.filter(a=>a.status==="deactivated").length,Icon:q,color:"text-red-600"},{title:"Expired",value:r.filter(a=>a.status==="expired").length,Icon:_,color:"text-orange-600"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-6 mb-4",children:s.map(a=>e.jsx(C,{data:a}))})};function J(){const{licenses:r}=b(),[s,a]=c.useState(""),[l,g]=c.useState("all"),[o,h]=c.useState("all"),[d,m]=c.useState(1),[u]=c.useState(8),n=(r==null?void 0:r.filter(t=>{if(s===""&&l==="all"&&o==="all")return!0;const v=s===""||t.license.toLowerCase().includes(s.toLowerCase())||t.type.toLowerCase().includes(s.toLowerCase()),w=l==="all"||t.type===l,N=o==="all"||t.status===o;return v&&w&&N}))||[],y=d*u,p=y-u,i=n.slice(p,y),j=t=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(parseFloat(t)),k=t=>new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return e.jsxs("section",{className:"w-full p-6 overflow-y-auto flex-grow",children:[e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-gray-100 mb-2",children:"License Management"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Manage your ASTER license inventory"})]}),e.jsxs("button",{type:"button",onClick:()=>document.getElementById("addLicenseModal").showModal(),className:"flex items-center justify-center w-1/2 px-5 py-2 text-sm tracking-wide text-white transition-colors duration-200 bg-blue-500 rounded-lg sm:w-auto gap-x-2 hover:bg-blue-600 dark:hover:bg-blue-500 dark:bg-blue-600",children:[e.jsx(A,{className:"w-5 h-5"}),e.jsx("span",{children:"Add Licenses"})]}),e.jsx(K,{})]})}),e.jsx(U,{licenses:r}),e.jsx(S,{setFilterStatus:h,setSearchTerm:a,setFilterType:g,searchTerm:s,filterType:l,filterStatus:o}),e.jsx("div",{className:"overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg mb-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3.5 font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"License"}),e.jsx("th",{scope:"col",className:"w-24 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Type"}),e.jsx("th",{scope:"col",className:"w-32 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Cost Price"}),e.jsx("th",{scope:"col",className:"w-32 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Purchase Date"}),e.jsx("th",{scope:"col",className:"w-24 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Status"}),e.jsx("th",{scope:"col",className:"w-32 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Action"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:divide-gray-700 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:i.length>0?i.map(t=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium ",children:t.license}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:t.type}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:j(t.costPrice)}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:k(t.purchaseDate)}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                    				${t.status==="available"?"bg-green-100 text-green-800":t.status==="sold"?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium",children:[e.jsx("button",{className:"btn btn-ghost text-blue-600 hover:text-blue-900",onClick:()=>handleView(t.id),children:e.jsx(f,{})}),e.jsx("button",{className:"btn btn-ghost text-red-600 hover:text-red-900 mr-2",onClick:()=>handleDeactivate(t.id),children:e.jsx(E,{})})]})]},t.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:s||l!=="all"||o!=="all"?"No licenses match your filters.":"No licenses available. Add some licenses to get started."})})})]})}),e.jsx(M,{perPage:u,currentPage:d,setCurrentPage:m,total:r.length})]})}export{J as default};
