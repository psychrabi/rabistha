import{r as t,a as f,j as e}from"./index-BwVAqFv_.js";import{J as x}from"./jodit-react-DigbBaE-.js";import{u as b,C as j}from"./index.esm-BEWobnSE.js";import{u as g}from"./adminStore-DheM1SjR.js";const C=({currentWiki:o})=>{const n=t.useRef(null),{register:r,handleSubmit:d,control:c,reset:a}=b({defaultValues:{currentWiki:o}}),{token:i}=g(),u=f(),m=t.useMemo(()=>({readonly:!1,height:600,uploader:{url:"http://localhost:4000/api/admin/wiki/upload",headers:{Authorization:`Bearer ${i}`},defaultHandlerSuccess:s=>s.file?s.file.url:null,process:s=>({files:[s.file],error:s.error?[s.error]:[]})},toolbarAdaptive:!1,buttons:["source","|","bold","italic","underline","strikethrough","|","ul","ol","|","indent","outdent","|","font","fontsize","brush","paragraph","|","image","file","table","link","|","align","undo","redo","|","hr","eraser","fullsize"],events:{beforeImage:s=>(s.style.maxWidth="100%",s.style.height="auto",s)},style:{color:"#000"}}),[]),h=async s=>{console.log({onsubmit:s});try{const l=o?"PUT":"POST",p=o?`http://localhost:4000/api/admin/wikis/${o.id}`:"http://localhost:4000/api/admin/wikis";(await fetch(p,{method:l,headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify(s)})).status===200&&u("/admin/wikis")}catch(l){console.error("Error saving wiki:",l)}};return t.useEffect(()=>{console.log(o),o&&a({title:o.title,content:o.content,category:o.category})},[o,a]),e.jsx("dialog",{className:"modal",id:"addWikiModal",children:e.jsxs("div",{className:"modal-box w-11/12 max-w-5xl",children:[e.jsxs("form",{onSubmit:d(h),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Category"}),e.jsxs("select",{...r("category",{required:"Category is required"}),className:"select w-full px-3 py-2 border rounded",children:[e.jsx("option",{value:"quick-start-guite",children:"Quick Start Guide"}),e.jsx("option",{value:"user-manual",children:"User Manual"}),e.jsx("option",{value:"faqs",children:"FAQs"}),e.jsx("option",{value:"solutions",children:"Solutions"}),e.jsx("option",{value:"version-history",children:"Version History"}),e.jsx("option",{value:"useful-links",children:"Useful Link"})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Title"}),e.jsx("input",{...r("title",{required:"Title is required"}),className:"w-full px-3 py-2 border rounded",placeholder:"Enter wiki title"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Content"}),e.jsx(j,{name:"content",control:c,rules:{required:"Content is required"},render:({field:{onChange:s,value:l}})=>e.jsx(x,{ref:n,value:l,config:m,onChange:s})})]}),e.jsx("div",{className:"modal-action",children:e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[o?"Update":"Create"," Wiki"]})})]}),e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn",children:"Cancel"})})]})})};export{C as default};
