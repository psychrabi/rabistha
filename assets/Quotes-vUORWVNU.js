const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/ViewQuoteModal-QqRdrzFm.js","assets/index-DWhQH8N9.js","assets/index-kejQTd8m.css","assets/x-Ben9qCNK.js","assets/CreateQuotationModal-geTg26iU.js","assets/types-DJpYmxkJ.js","assets/index.esm-lhwI6miF.js","assets/adminStore-DnMRCSrj.js"])))=>i.map(i=>d[i]);
import{c as M,r as a,a as D,j as t,_ as j}from"./index-DWhQH8N9.js";import{F as V}from"./Filter-BTHZtz9J.js";import{P as F}from"./Pagination-BjD2eoN1.js";import{u as f}from"./adminStore-DnMRCSrj.js";import{E as I}from"./eye-1a3qtfEv.js";import{P as O}from"./pencil-CFk4MrsF.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],$=M("trash",R),z=a.lazy(()=>j(()=>import("./ViewQuoteModal-QqRdrzFm.js").then(l=>l.V),__vite__mapDeps([0,1,2,3]))),B=a.lazy(()=>j(()=>import("./CreateQuotationModal-geTg26iU.js"),__vite__mapDeps([4,1,2,5,6,7])));function X(){const{quotes:l,fetchQuotes:h}=f(),[o,N]=a.useState(""),[n,w]=a.useState("all"),[c,b]=a.useState("all"),[p,k]=a.useState(1),[i]=a.useState(8),[d,x]=a.useState([]),[v,m]=a.useState(!1),{navigate:S}=D(),C=(l==null?void 0:l.filter(e=>{var g,u;if(o===""&&n==="all"&&c==="all")return!0;const r=o===""||((g=e.user)==null?void 0:g.name.toLowerCase().includes(o.toLowerCase()))||((u=e.user)==null?void 0:u.email.toLowerCase().includes(o.toLowerCase())),P=n==="all"||e.type===n,L=c==="all"||e.status===c;return r&&P&&L}))||[],y=p*i,E=y-i,s=C.slice(E,y),_=e=>{x(e);const r=document.getElementById("quotationModal");r&&r.showModal()},Q=()=>{x(null),m(!0)},T=e=>{x(e),m(!0)},A=async e=>{confirm("Are you sure you want to delete this quotation?")&&(await fetch(`http://localhost:4000/api/admin/quotes/${e.id}`,{method:"DELETE",headers:{Authorization:`Bearer ${f.getState().token}`}})).success&&S(0)};return a.useEffect(()=>{h()},[h]),t.jsxs("section",{className:"w-full p-6 overflow-y-auto",children:[t.jsx("div",{className:"mb-4",children:t.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Quotes & Invoices"}),t.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Create and manage quotes and invoices"})]}),t.jsx("button",{className:"btn btn-primary",onClick:()=>Q(),children:"Create New Quote"}),v&&t.jsx(B,{quote:d,onClose:()=>m(!1)})]})}),t.jsx(V,{setFilterStatus:b,setSearchTerm:N,setFilterType:w,searchTerm:o,filterType:n,filterStatus:c}),t.jsx("div",{className:"overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg mb-4",children:t.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[t.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800",children:t.jsxs("tr",{children:[t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Quote #"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Customer"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Amount"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Status"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Valid Until"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Created"}),t.jsx("th",{scope:"col",className:"px-4 py-3.5 text-sm font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Actions"})]})}),t.jsx("tbody",{children:(s==null?void 0:s.length)>0?s==null?void 0:s.map((e,r)=>t.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-gray-800",children:[t.jsxs("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:["QT-",e.id]}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:e.user.name}),t.jsxs("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:["$",e.total]}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:t.jsx("div",{className:`badge ${e.status==="DRAFT"?"badge-secondary":e.status==="SENT"?"badge-info":e.status==="ACCEPTED"?"badge-success":"badge-error"}`,children:e.status})}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:new Date(e.validUntil).toLocaleDateString()}),t.jsx("td",{className:"px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap",children:new Date(e.createdAt).toLocaleDateString()}),t.jsxs("td",{className:"px-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap space-x-2",children:[t.jsx("button",{className:"text-green-600",type:"button",onClick:()=>_(e),children:t.jsx(I,{className:"inline"})}),t.jsx("button",{className:"text-blue-600",type:"button",onClick:()=>T(e),children:t.jsx(O,{className:"inline"})}),t.jsx("button",{className:"text-red-600",type:"button",onClick:()=>A(e),children:t.jsx($,{className:"inline"})})]})]},r)):t.jsx("tr",{children:t.jsx("td",{colSpan:6,className:"text-center py-8 text-slate-500",children:o||n!=="all"||c!=="all"?"No quotes match your filters.":"No quotes available. Add some quotes to get started."})})})]})}),t.jsx(F,{total:s.length,perPage:i,currentPage:p,onPageChange:k}),d&&t.jsx(z,{quote:d})]})}export{X as default};
