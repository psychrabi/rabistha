import{c as T,r,a as A,j as e}from"./index-ChX-6Ru7.js";import{J as M}from"./jodit-react-BqstCJNK.js";import{u as E,C as P}from"./index.esm-DE53kMNz.js";import{u as b}from"./adminStore-ykny_srM.js";import{F}from"./Filter-DNe6LenE.js";import{P as L}from"./Pagination-D0I2pUiD.js";import{P as z}from"./plus-DEkCMhdv.js";import{T as q}from"./trash-2-BjuuaSEr.js";/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],I=T("pencil",B),O=({currentFAQ:t})=>{const u=r.useRef(null),{register:p,handleSubmit:c,control:m,reset:l}=E({defaultValues:{currentFAQ:t}}),{token:h}=b(),n=A(),g=r.useMemo(()=>({readonly:!1,height:600,uploader:{url:"http://localhost:4000/api/admin/faq/upload",headers:{Authorization:`Bearer ${h}`},defaultHandlerSuccess:s=>s.file?s.file.url:null,process:s=>({files:[s.file],error:s.error?[s.error]:[]})},toolbarAdaptive:!1,buttons:["source","|","bold","italic","underline","strikethrough","|","ul","ol","|","indent","outdent","|","font","fontsize","brush","paragraph","|","image","file","table","link","|","align","undo","redo","|","hr","eraser","fullsize"],events:{beforeImage:s=>(s.style.maxWidth="100%",s.style.height="auto",s)},style:{color:"#000"}}),[]),i=async s=>{try{const o=t?"PUT":"POST",f=t?`http://localhost:4000/api/admin/faqs/${t.id}`:"http://localhost:4000/api/admin/faqs",d=await fetch(f,{method:o,headers:{"Content-Type":"application/json",Authorization:`Bearer ${h}`},body:JSON.stringify(s)});d.status===200&&(console.log(d),n(0))}catch(o){console.error("Error saving faq:",o)}};return r.useEffect(()=>{console.log(t),t&&l({title:t.title,content:t.content,category:t.category})},[t,l]),e.jsx("dialog",{className:"modal",id:"addFAQModal",children:e.jsxs("div",{className:"modal-box w-11/12 max-w-5xl",children:[e.jsxs("form",{onSubmit:c(i),children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Title"}),e.jsx("input",{...p("title",{required:"Title is required"}),className:"w-full px-3 py-2 border rounded",placeholder:"Enter faq title"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-2",children:"Content"}),e.jsx(P,{name:"content",control:m,rules:{required:"Content is required"},render:({field:{onChange:s,value:o}})=>e.jsx(M,{ref:u,theme:"dark",value:o,config:g,onChange:s})})]}),e.jsx("div",{className:"modal-action",children:e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600",children:[t?"Update":"Create"," FAQ"]})})]}),e.jsx("form",{method:"dialog",children:e.jsx("button",{className:"btn",children:"Cancel"})})]})})};function V(){const{faqs:t,fetchFAQs:u,deleteFAQ:p}=b(),[c,m]=r.useState([]),[l,h]=r.useState(""),[n,g]=r.useState("all"),[i,s]=r.useState("all"),[o,f]=r.useState(1),[d]=r.useState(12),j=()=>{m(null),document.getElementById("addFAQModal").showModal()},N=(t==null?void 0:t.filter(a=>{if(l===""&&n==="all"&&i==="all")return!0;const k=l===""||a.title.toLowerCase().includes(l.toLowerCase()),S=n==="all"||a.type===n,C=i==="all"||a.status===i;return k&&S&&C}))||[],y=o*d,w=y-d,x=N.slice(w,y),v=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"});return r.useEffect(()=>{u(),console.log(c)},[]),e.jsxs("section",{className:"w-full p-6 overflow-y-auto",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-gray-100 mb-2",children:"FAQ Management"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Manage ASTER FAQs from here"})]}),e.jsxs("button",{type:"button",onClick:()=>j(),className:"flex items-center justify-center w-1/2 px-5 py-2 text-sm tracking-wide text-white transition-colors duration-200 bg-blue-500 rounded-lg sm:w-auto gap-x-2 hover:bg-blue-600 dark:hover:bg-blue-500 dark:bg-blue-600",children:[e.jsx(z,{className:"w-5 h-5"}),e.jsx("span",{children:"Add a new FAQ"})]}),e.jsx(O,{currentFAQ:c})]})}),e.jsx(F,{setFilterStatus:s,setSearchTerm:h,setFilterType:g,searchTerm:l,filterType:n,filterStatus:i}),e.jsx("div",{className:"overflow-hidden border border-gray-200 dark:border-gray-700 md:rounded-lg mb-4",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-800 text-sm",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-4 py-3.5 font-normal text-left rtl:text-right text-gray-500 dark:text-gray-400",children:"Title"}),e.jsx("th",{scope:"col",className:"w-32 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Last Updated"}),e.jsx("th",{scope:"col",className:"w-32 px-4 py-3.5 font-normal text-center rtl:text-right text-gray-500 dark:text-gray-400",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200 dark:divide-gray-700 dark:bg-gray-900 text-gray-900 dark:text-gray-100",children:x.length>0?x==null?void 0:x.map(a=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"px-4 py-2 whitespace-nowrap font-medium",children:a.title}),e.jsx("td",{className:"px-4 py-2 whitespace-nowrap text-center",children:v(a.updatedAt)}),e.jsxs("td",{className:"px-4 py-2 whitespace-nowrap font-medium",children:[e.jsx("button",{onClick:()=>{m(a),document.getElementById("addFAQModal").showModal()},className:"text-yellow-600 hover:text-yellow-900 mx-2",children:e.jsx(I,{})}),e.jsx("button",{onClick:()=>p(a),className:"text-red-600 hover:text-red-900 mx-2",children:e.jsx(q,{})})]})]},a.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:4,className:"text-center py-8 text-slate-500",children:l||n!=="all"||i!=="all"?"No faqs match your filters.":"No faqs available. Add some faqs to get started."})})})]})}),e.jsx(L,{perPage:d,currentPage:o,setCurrentPage:f,total:t.length})]})}export{V as default};
