import{r as n,j as e}from"./index-SEtHancR.js";import{u as f}from"./adminStore-DvjmA4W7.js";import{a as k,o as j,n as N,s as a}from"./types-DjkVMrsM.js";import{u as S}from"./index.esm-BwnxTdgt.js";const v="http://localhost:4000/api";class w{async request(t,u={}){const{token:o}=f.getState(),d={headers:{"Content-Type":"application/json",...o&&{Authorization:`Bearer ${o}`}},...u},s=await fetch(`${v}${t}`,d);if(!s.ok){const c=await s.json().catch(()=>({error:"Network error"}));throw new Error(c.error||"Something went wrong")}return s.json()}async login(t){return this.request("/auth/login",{method:"POST",body:JSON.stringify(t)})}async register(t){return this.request("/auth/register",{method:"POST",body:JSON.stringify(t)})}async getLicenses(){return this.request("/licenses")}async createLicense(t){return this.request("/licenses",{method:"POST",body:JSON.stringify(t)})}async getOrders(){return this.request("/orders")}async getWikiPages(){return this.request("/wiki")}async getWikiPage(t){return this.request(`/wiki/${t}`)}async getFAQs(){return this.request("/faqs")}async getSettings(){return this.request("/settings")}async getDashboardStats(){return this.request("/dashboard/stats")}}const x=new w,P=j({siteName:a().min(1,"Site name is required"),siteDescription:a().min(1,"Site description is required"),contactEmail:a().email("Valid email is required"),contactPhone:a().min(1,"Phone number is required"),contactAddress:a().min(1,"Address is required"),smtpHost:a().min(1,"SMTP host is required"),smtpPort:a().min(1,"SMTP port is required"),smtpUser:a().email("Valid SMTP user email is required"),smtpPass:a().min(1,"SMTP password is required"),currency:a().min(1,"Currency is required"),taxRate:N().min(0,"Tax rate must be positive")});function R(){const[,g]=n.useState({}),[t,u]=n.useState(!0),[o,d]=n.useState(!1),[s,c]=n.useState("general"),{register:i,handleSubmit:m,reset:y,formState:{errors:r}}=S({resolver:k(P)});n.useEffect(()=>{b()},[]);const b=async()=>{try{const l=await x.getSettings();g(l),y(l)}catch(l){console.error("Failed to fetch settings:",l)}finally{u(!1)}},h=async l=>{d(!0);try{await x.request("/settings",{method:"PUT",body:JSON.stringify(l)}),g(l),alert("Settings saved successfully!")}catch(p){console.error("Failed to save settings:",p),alert("Failed to save settings. Please try again.")}finally{d(!1)}};return t?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsxs("section",{className:"w-full p-6 overflow-y-auto  h-full",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"sm:flex sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Settings"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Configure your ASTER license management system"})]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-center",children:[e.jsx("div",{className:"lg:w-[15%]",children:e.jsxs("ul",{className:"menu bg-base-100 rounded-box w-full",children:[e.jsx("li",{children:e.jsx("button",{className:s==="general"?"active":"",onClick:()=>c("general"),children:"General Settings"})}),e.jsx("li",{children:e.jsx("button",{className:s==="contact"?"active":"",onClick:()=>c("contact"),children:"Contact Information"})}),e.jsx("li",{children:e.jsx("button",{className:s==="billing"?"active":"",onClick:()=>c("billing"),children:"Billing Settings"})})]})}),e.jsx("div",{className:"w-200",children:e.jsx("form",{onSubmit:m(h),children:e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[s==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"General Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Site Name"}),e.jsx("input",{placeholder:"ASTER Multiseat",...i("siteName"),type:"text",className:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.siteName&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.siteName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Site Description"}),e.jsx("textarea",{className:`block mt-2 w-full  placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-4 h-32 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.siteDescription?"textarea-error":""}`,placeholder:"Transform one computer into multiple workstations",...i("siteDescription")}),r.siteDescription&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.siteDescription.message})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Logo Upload"}),e.jsx("input",{type:"file",className:"block w-full px-3 py-2 mt-2 text-sm text-gray-600 bg-white border border-gray-200 rounded-lg file:bg-gray-200 file:text-gray-700 file:text-sm file:px-4 file:py-1 file:border-none file:rounded-full dark:file:bg-gray-800 dark:file:text-gray-200 dark:text-gray-300 placeholder-gray-400/70 dark:placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:focus:border-blue-300",accept:"image/*"}),e.jsx("p",{className:"mt-3 text-xs text-grey-400 dark:text-gray-600",children:"Upload your company logo (PNG, JPG)"})]})]}),s==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Contact Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Contact Email"}),e.jsx("input",{placeholder:"email@example.com",...i("contactEmail"),type:"email",className:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.contactEmail&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Phone number"}),e.jsx("input",{placeholder:"+1 (555) 123-4567",...i("contactPhone"),type:"tel",className:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.contactPhone&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactPhone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Business Address"}),e.jsx("textarea",{className:`block mt-2 w-full  placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-4 h-32 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.siteDescription?"textarea-error":""}`,placeholder:"Transform one computer into multiple workstations",...i("contactAddress")}),r.contactAddress&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactAddress.message})]})]}),s==="billing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Billing Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Tax Rate (%)"}),e.jsx("input",{...i("taxRate",{valueAsNumber:!0}),step:"0.01",placeholder:"0.00",type:"number",className:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.taxRate&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.taxRate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Default Currency"}),e.jsxs("select",{className:`select block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.currency?"select-error":""}`,...i("currency"),children:[e.jsx("option",{value:"",children:"Select currency"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"})]}),r.currency&&e.jsx("p",{className:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.currency.message})]})]})]}),e.jsx("div",{className:"card-actions justify-end pt-6",children:e.jsx("button",{type:"submit",className:`btn btn-primary ${o?"loading":""}`,disabled:o,children:o?"Saving...":"Save Settings"})})]})})})})]})]})}export{R as default};
