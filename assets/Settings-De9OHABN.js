import{r as d,j as e}from"./index-CVbpt0Y7.js";import{u as f}from"./adminStore-5d9aNCV_.js";import{a as k,o as j,n as N,s as l}from"./types-B5VC3BMs.js";import{u as w}from"./index.esm-DK_4X9PL.js";const v="http://localhost:4000/api";class S{async request(s,u={}){const{token:i}=f.getState(),n={headers:{"Content-Type":"application/json",...i&&{Authorization:`Bearer ${i}`}},...u},t=await fetch(`${v}${s}`,n);if(!t.ok){const c=await t.json().catch(()=>({error:"Network error"}));throw new Error(c.error||"Something went wrong")}return t.json()}async login(s){return this.request("/auth/login",{method:"POST",body:JSON.stringify(s)})}async register(s){return this.request("/auth/register",{method:"POST",body:JSON.stringify(s)})}async getLicenses(){return this.request("/licenses")}async createLicense(s){return this.request("/licenses",{method:"POST",body:JSON.stringify(s)})}async getOrders(){return this.request("/orders")}async getWikiPages(){return this.request("/wiki")}async getWikiPage(s){return this.request(`/wiki/${s}`)}async getFAQs(){return this.request("/faqs")}async getSettings(){return this.request("/settings")}async getDashboardStats(){return this.request("/dashboard/stats")}}const x=new S,P=j({siteName:l().min(1,"Site name is required"),siteDescription:l().min(1,"Site description is required"),contactEmail:l().email("Valid email is required"),contactPhone:l().min(1,"Phone number is required"),contactAddress:l().min(1,"Address is required"),smtpHost:l().min(1,"SMTP host is required"),smtpPort:l().min(1,"SMTP port is required"),smtpUser:l().email("Valid SMTP user email is required"),smtpPass:l().min(1,"SMTP password is required"),currency:l().min(1,"Currency is required"),taxRate:N().min(0,"Tax rate must be positive")});function U(){const[,g]=d.useState({}),[s,u]=d.useState(!0),[i,n]=d.useState(!1),[t,c]=d.useState("general"),{register:a,handleSubmit:m,reset:y,formState:{errors:r}}=w({resolver:k(P)});d.useEffect(()=>{b()},[]);const b=async()=>{try{const o=await x.getSettings();g(o),y(o)}catch(o){console.error("Failed to fetch settings:",o)}finally{u(!1)}},h=async o=>{n(!0);try{await x.request("/settings",{method:"PUT",body:JSON.stringify(o)}),g(o),alert("Settings saved successfully!")}catch(p){console.error("Failed to save settings:",p),alert("Failed to save settings. Please try again.")}finally{n(!1)}};return s?e.jsx("div",{className:"flex justify-center items-center min-h-screen",children:e.jsx("span",{className:"loading loading-spinner loading-lg"})}):e.jsxs("section",{className:"w-full p-6 overflow-y-auto  h-full",children:[e.jsx("div",{className:"mb-4",children:e.jsx("div",{className:"sm:flex sm:items-center sm:justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Settings"}),e.jsx("p",{className:"text-slate-600 dark:text-gray-300",children:"Configure your ASTER license management system"})]})})}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6 justify-center",children:[e.jsx("div",{className:"lg:w-[15%]",children:e.jsxs("ul",{className:"menu bg-base-100 rounded-box w-full",children:[e.jsx("li",{children:e.jsx("button",{className:t==="general"?"active":"",onClick:()=>c("general"),children:"General Settings"})}),e.jsx("li",{children:e.jsx("button",{className:t==="contact"?"active":"",onClick:()=>c("contact"),children:"Contact Information"})}),e.jsx("li",{children:e.jsx("button",{className:t==="email"?"active":"",onClick:()=>c("email"),children:"Email Configuration"})}),e.jsx("li",{children:e.jsx("button",{className:t==="billing"?"active":"",onClick:()=>c("billing"),children:"Billing Settings"})})]})}),e.jsx("div",{className:"w-200",children:e.jsx("form",{onSubmit:m(h),children:e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[t==="general"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"General Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Site Name"}),e.jsx("input",{placeholder:"ASTER Multiseat",...a("siteName"),type:"text",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.siteName&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.siteName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Site Description"}),e.jsx("textarea",{className:`block mt-2 w-full  placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-4 h-32 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.siteDescription?"textarea-error":""}`,placeholder:"Transform one computer into multiple workstations",...a("siteDescription")}),r.siteDescription&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.siteDescription.message})]}),e.jsxs("div",{className:"form-control",children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Logo Upload"}),e.jsx("input",{type:"file",class:"block w-full px-3 py-2 mt-2 text-sm text-gray-600 bg-white border border-gray-200 rounded-lg file:bg-gray-200 file:text-gray-700 file:text-sm file:px-4 file:py-1 file:border-none file:rounded-full dark:file:bg-gray-800 dark:file:text-gray-200 dark:text-gray-300 placeholder-gray-400/70 dark:placeholder-gray-500 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:focus:border-blue-300",accept:"image/*"}),e.jsx("p",{class:"mt-3 text-xs text-grey-400 dark:text-gray-600",children:"Upload your company logo (PNG, JPG)"})]})]}),t==="contact"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Contact Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Contact Email"}),e.jsx("input",{placeholder:"email@example.com",...a("contactEmail"),type:"email",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.contactEmail&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactEmail.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Phone number"}),e.jsx("input",{placeholder:"+1 (555) 123-4567",...a("contactPhone"),type:"tel",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.contactPhone&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactPhone.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",children:"Business Address"}),e.jsx("textarea",{className:`block mt-2 w-full  placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-4 h-32 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.siteDescription?"textarea-error":""}`,placeholder:"Transform one computer into multiple workstations",...a("contactAddress")}),r.contactAddress&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.contactAddress.message})]})]}),t==="email"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Email Configuration"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"SMTP Host"}),e.jsx("input",{placeholder:"smtp.gmail.com",...a("smtpHost"),type:"text",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.smtpHost&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.smtpHost.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"SMTP Port"}),e.jsx("input",{placeholder:"587",...a("smtpPort"),type:"text",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.smtpPort&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.smtpPort.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"SMTP Username"}),e.jsx("input",{placeholder:"email@example.com",...a("smtpUser"),type:"email",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.smtpUser&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.smtpUser.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Contact Email"}),e.jsx("input",{placeholder:"email@example.com",...a("smtpPass"),type:"password",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.smtpPass&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.smtpPass.message})]})]}),e.jsxs("div",{className:"alert alert-info",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",className:"stroke-current shrink-0 w-6 h-6",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("span",{children:"For Gmail, use an App Password instead of your regular password."})]})]}),t==="billing"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"card-title",children:"Billing Settings"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Tax Rate (%)"}),e.jsx("input",{...a("taxRate",{valueAsNumber:!0}),step:"0.01",placeholder:"0.00",type:"number",class:"block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300"}),r.taxRate&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.taxRate.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-gray-500 dark:text-gray-300",htmlFor:"siteName",children:"Default Currency"}),e.jsxs("select",{className:`select block mt-2 w-full placeholder-gray-400/70 dark:placeholder-gray-500 rounded-lg border border-gray-200 bg-white px-5 py-2.5 text-gray-700 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300 ${r.currency?"select-error":""}`,...a("currency"),children:[e.jsx("option",{value:"",children:"Select currency"}),e.jsx("option",{value:"USD",children:"USD - US Dollar"}),e.jsx("option",{value:"EUR",children:"EUR - Euro"}),e.jsx("option",{value:"GBP",children:"GBP - British Pound"}),e.jsx("option",{value:"RUB",children:"RUB - Russian Ruble"})]}),r.currency&&e.jsx("p",{class:"mt-3 text-xs text-red-400 dark:text-red-600",children:r.currency.message})]})]})]}),e.jsx("div",{className:"card-actions justify-end pt-6",children:e.jsx("button",{type:"submit",className:`btn btn-primary ${i?"loading":""}`,disabled:i,children:i?"Saving...":"Save Settings"})})]})})})})]})]})}export{U as default};
