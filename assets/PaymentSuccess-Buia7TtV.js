import{d as g,a as v,e as w,r as i,j as e}from"./index-CI7UZADU.js";import{C as k}from"./circle-check-big-KOFXfMj-.js";const P=()=>{var j;const t=g(),o=v(),[x]=w(),[s,c]=i.useState(null),[d,m]=i.useState([]),[N,h]=i.useState(!0);return i.useEffect(()=>{(async()=>{var n,u;try{if((n=t.state)!=null&&n.orderDetails&&((u=t.state)!=null&&u.purchasedLicenses)){c(t.state.orderDetails),m(t.state.purchasedLicenses),h(!1);return}const l=x.get("sales");if(l){const r=await fetch(`http://localhost:4000/api/sales/${l}`);if(r.ok){const y=await r.json();c(y);const f=await fetch(`http://localhost:4000/api/licenses?saleId=${l}`);if(f.ok){const b=await f.json();m(b)}}}const p=localStorage.getItem("currentOrder");if(p){const r=JSON.parse(p);c(r.sales),localStorage.removeItem("currentOrder")}}catch(l){console.error("Error loading order details:",l)}finally{h(!1)}})()},[t.state,x]),N?e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"loading loading-spinner loading-lg"}),e.jsx("p",{className:"mt-4",children:"Loading payment details..."})]})}):s?e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx(k,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Payment Successful!"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Thank you for your purchase"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Order ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Status"}),e.jsx("span",{className:"text-green-600 capitalize",children:s.paymentStatus})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Payment Method"}),e.jsx("span",{className:"capitalize",children:s.paymentMethod})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",((j=s.salesPrice)==null?void 0:j.toFixed(2))||"0.00"]})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-$",s.discount.toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",((s.salesPrice||0)-(s.discount||0)).toFixed(2)]})]})})]})]}),d.length>0&&e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Purchased Licenses (",d.length,")"]}),e.jsx("div",{className:"space-y-4",children:d.map((a,n)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"font-medium",children:["License #",n+1]}),e.jsx("span",{className:"text-green-600 capitalize",children:a.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"License Key"}),e.jsx("span",{className:"font-mono text-sm break-all",children:a.license})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Type"}),e.jsx("span",{children:a.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Users"}),e.jsx("span",{children:a.noOfUsers})]}),a.soldDate&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600 dark:text-gray-300",children:"Purchase Date"}),e.jsx("span",{children:new Date(a.soldDate).toLocaleDateString()})]})]})]},a.id))}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"Important Information"}),e.jsxs("ul",{className:"text-sm text-blue-700 dark:text-blue-300 space-y-1",children:[e.jsx("li",{children:"• Save your license keys in a safe place"}),e.jsx("li",{children:"• You will receive an email confirmation with your license details"}),e.jsx("li",{children:"• Contact support if you need help with installation"})]})]})]})]}),e.jsxs("div",{className:"mt-8 text-center space-x-4",children:[e.jsx("button",{onClick:()=>o("/"),className:"btn btn-primary",children:"Return to Home"}),e.jsx("button",{onClick:()=>window.print(),className:"btn btn-outline",children:"Print Receipt"})]})]}):e.jsxs("div",{className:"max-w-2xl mx-auto p-6 text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find your order details."}),e.jsx("button",{onClick:()=>o("/"),className:"btn btn-primary",children:"Return to Home"})]})};export{P as default};
