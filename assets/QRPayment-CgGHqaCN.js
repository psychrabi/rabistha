import{d as x,a as m,r as i,j as e}from"./index-D2dDBYcx.js";import{Q as h}from"./index-CGDdPWJ7.js";const f=()=>{const t=x(),l=m(),[s,n]=i.useState(null),[a,c]=i.useState(null);if(i.useEffect(()=>{if(!t.state){l("/rabistha/cart");return}localStorage.setItem("currentOrder",JSON.stringify(t.state)),n(t.state);const r=JSON.parse(localStorage.getItem("licenses")||"[]").find(o=>o.orderId===t.state.id);c(r)},[t.state,l]),!s)return null;const d=`${window.location.origin}/rabistha/payment-success?orderId=${s.id}`;return e.jsxs("div",{className:"max-w-2xl mx-auto p-6",children:[e.jsx("h2",{className:"text-2xl font-bold mb-6",children:"QR Payment"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Scan QR Code to Pay"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(h,{value:d,size:256})}),e.jsx("p",{className:"text-center mt-4 text-gray-600",children:"Scan this QR code with your payment app"}),e.jsxs("p",{className:"text-center mt-2 text-sm text-gray-500",children:["Order ID: ",s.id]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Order ID"}),e.jsx("span",{className:"font-medium",children:s.id})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{children:["$",s.subtotal.toFixed(2)]})]}),s.discount>0&&e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsx("span",{children:"Discount"}),e.jsxs("span",{children:["-$",s.discount.toFixed(2)]})]}),e.jsx("div",{className:"border-t pt-2 mt-2",children:e.jsxs("div",{className:"flex justify-between font-semibold",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{children:["$",s.total.toFixed(2)]})]})})]})]}),a&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"License Details"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"License Key"}),e.jsx("span",{className:"font-mono",children:a.key})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Status"}),e.jsx("span",{className:"capitalize",children:a.status})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Valid Until"}),e.jsx("span",{children:new Date(a.validUntil).toLocaleDateString()})]})]})]})]})]}),e.jsxs("p",{className:"text-lg font-semibold mb-6",children:["Total: $",t.state.total.toFixed(2)]}),e.jsx("button",{onClick:()=>l(`/rabistha/payment-success?orderId=${t.state.id}`),className:"btn btn-primary w-full",children:"I've Completed the Payment"})]})};export{f as default};
